@model ResumeBuilder.ViewModels.PublicProfileViewModel

@{
    Layout = null;
    ViewBag.Title = "Preview";
}

@if (Model.ErrorMsg != null)
{
    <script>
        alert('@Model.ErrorMsg');
    </script>
}
else
{
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        .text-blk {
            color: black !important;
        }
        .skill-language-margin {
            padding: 1% 0% 1% 3%;
        }
        .font-size-heading {
            font-size: 24px;
            background-color: #86b9d68f;
        }
        .preview-card {
            border-radius: 10px;
            background-color: #fff;
            width:240px;
            height:270px;
            display:flex;
            margin-top: 38px;
            box-shadow: 0 20px 60px 0 rgba(0,0,0,0.3);
            position: relative;
        }
        .preview-img {
            width: 100%;
            filter: blur(1px);
        }
        .preview-text{
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 75%;
            padding: 10px;
            text-align: center;
            font-size:20px;
        }
        .preview-card:hover{
            background:rgba(191, 200, 252, 0.884);
        }
        .preview-text::after {
          position: absolute;
          content: "";
          width: 100%;
          height: 3px;
          top: 100%;
          left: 0;
          background: #ff7000;
          transition: transform 0.5s;
          transform: scaleX(0);
          transform-origin: right;
        }
        .preview-text:hover::after {
          transform: scaleX(1);
          transform-origin: left;
        }
        .name-size {
            font-size: 50px;
        }
        .small-heading {
            font-size: 16px;
        }
        th {
            vertical-align: middle !important;
            font-size: 17px;
        }
        
    </style>
    
    <div class="row">
        <div class="preview-card text-center col-lg-4 col-lg-offset-1 col-md-4 col-md-offset-1 col-sm-5 col-sm-offset-1" data-toggle="modal" data-target="#resumeBasicPreviewModal">
            <img class="preview-img" src="~/Content/Images/bg-prev-basic.png" />
            <div class="preview-text text-primary"><b>Basic Preview</b></div>
        </div>
        <div class="preview-card text-center col-lg-4 col-lg-offset-1 col-md-4 col-md-offset-1 col-sm-5 col-sm-offset-1" data-toggle="modal" data-target="#resumeTabularPreviewModal">
            <img class="preview-img" src="~/Content/Images/bg-prev-table.png" />
            <div class="preview-text text-primary"><b>Tabular Preview</b></div>
        </div>
    </div>
    <!-- Basic View Modal-->
    <div id="resumeBasicPreviewModal" class="modal fade text-blk" role="dialog">
        <div class="modal-dialog modal-lg">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">RESUME</h4>
                </div>
                <div class="modal-body">
                    <h1 class="text-primary text-center name-size">@Model.Name</h1>
                    <div id="basicInfoModal">
                        <div class="text-center text-primary font-size-heading">Personal Details</div>
                        <div>
                            <div><b>Gender : </b>@Model.Gender</div>
                            <div><b>DOB : </b>@Model.DOB</div>
                            <div><b>E-mail : </b>@Model.Email</div>
                            <div><b>Phone No. : </b>@Model.PhoneNumber</div>
                        </div>
                    </div>
                    <div id="educationModal">
                        <div class="text-center text-primary font-size-heading">Education Details</div>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Sl. No.</th>
                                    <th>Course</th>
                                    <th>Stream</th>
                                    <th>Board</th>
                                    <th>CGPA / Percentage</th>
                                    <th>Passing Year</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (Model.EducationList != null)
                                {
                                    var counter = 0;
                                    foreach (var data in Model.EducationList)
                                    {
                                        counter++;
                                        <tr>
                                            <td>@counter</td>
                                            <td>@data.CourseName</td>
                                            <td>@data.Stream</td>
                                            <td>@data.Board</td>
                                            <td>@data.CGPAOrPercentage : @data.TotalPercentorCGPAValue</td>
                                            <td>@data.PassingYear</td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                    <div id="skillsModal">
                        <div class="text-center text-primary font-size-heading">Skills</div>

                        <div class="skill-language-margin">
                            @if (Model.SkillList != null)
                            {
                                var count = Model.SkillList.Count;
                                var counter = 0;
                                foreach (var data in Model.SkillList)
                                {
                                    counter++;
                                    if (counter == count - 1)
                                    {
                                        <span><b>@data</b> and </span>
                                    }
                                    else if (counter == count)
                                    {
                                        <span><b>@data</b></span>
                                    }
                                    else
                                    {
                                        <span><b>@data</b>, </span>
                                    }
                                }
                            }
                        </div>
                    </div>
                    <div id="projectsModal">
                        <div class="text-center text-primary font-size-heading">Projects</div>
                        <ul class="mt-2">
                            @if (Model.ProjectList != null)
                            {
                                foreach (var data in Model.ProjectList)
                                {
                                    <li>
                                        <div>
                                            <h5><b>@data.Title</b></h5>
                                            <p>@data.Description</p>
                                            <h6>Duration : @data.Duration Months</h6>
                                        </div>
                                    </li>
                                }
                            }
                        </ul>
                    </div>
                    <div id="workExModal">
                        <div class="text-center text-primary font-size-heading">Work Experience</div>
                        <div class="">
                            <ul class="mt-2">
                                @if (Model.WorkExList != null)
                                {
                                    foreach (var data in Model.WorkExList)
                                    {
                                        <li>
                                            <div>
                                                @if (@data.CurrentlyWorking == true)
                                                {
                                                    <h5><b>@data.OrganizationName</b> (Currently Working Here)</h5>
                                                }
                                                else
                                                {
                                                    <h5><b>@data.OrganizationName</b></h5>
                                                }
                                                <div>Role : @data.Role</div>
                                                <h6>@data.StartMonth/@data.StartYear - @data.EndMonth/@data.EndYear</h6>
                                            </div>
                                        </li>
                                    }
                                }
                            </ul>
                        </div>
                    </div>
                    <div id="languagesModal">
                        <div class="text-center text-primary font-size-heading">Languages</div>
                        <div class="skill-language-margin">
                            @if (Model.Languages != null)
                            {
                                var count = Model.Languages.Count;
                                var counter = 0;
                                foreach (var data in Model.Languages)
                                {
                                    counter++;
                                    if (counter == count - 1)
                                    {
                                        <span><b>@data</b> and </span>
                                    }
                                    else if (counter == count)
                                    {
                                        <span><b>@data</b></span>
                                    }
                                    else
                                    {
                                        <span><b>@data</b>, </span>
                                    }
                                }
                            }
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success"><i class="fa fa-download"> Download</i></button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>

    <!-- Tabular View Modal-->
    <div id="resumeTabularPreviewModal" class="modal fade text-blk" role="dialog">
        <div class="modal-dialog modal-lg">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">RESUME</h4>
                </div>
                <div class="modal-body">
                    <h1 class="text-primary text-center name-size">@Model.Name</h1>

                    <table class="table table-bordered">
                        <tbody>
                            <tr>
                                <th rowspan="3">Contact</th>
                            </tr>
                            <tr>
                                <td><b>E-mail : </b>@Model.Email</td>
                            </tr>
                            <tr>
                                <td><b>Phone : </b>@Model.PhoneNumber</td>
                            </tr>
                            <tr>
                                <th>Date Of Birth</th>
                                <td>@Model.DOB</td>
                            </tr>
                            @if (Model.Summary != null)
                            {
                                <tr>
                                    <th>Summary</th>
                                    <td>@Model.Summary</td>
                                </tr>
                            }
                            
                            @if(Model.EducationList.Count != 0)
                            {
                                var rowCountEducation = Model.EducationList.Count + 1;

                                <tr>
                                    <th rowspan="@rowCountEducation">Education</th>
                                </tr>
                                if (Model.EducationList != null)
                                {
                                    foreach (var data in Model.EducationList)
                                    {
                                        <tr>
                                            <td>
                                                <b class="small-heading">@data.CourseName</b><br />
                                                <b>Stream : </b>@data.Stream<br />
                                                <b>Board : </b>@data.Board<br />
                                                <b>@data.CGPAOrPercentage : </b>@data.TotalPercentorCGPAValue<br />
                                                <b>Passing Year :</b>@data.PassingYear
                                            </td>
                                        </tr>
                                    }
                                }
                            }
                            @if (Model.SkillList.Count != 0)
                            {
                                <tr>
                                    <th>Skills</th>
                                    <td>
                                        @if (Model.SkillList != null)
                                        {
                                            var count = Model.SkillList.Count;
                                            var counter = 0;
                                            foreach (var data in Model.SkillList)
                                            {
                                                counter++;
                                                if (counter == count - 1)
                                                {
                                                    <span><b>@data</b> and </span>
                                                }
                                                else if (counter == count)
                                                {
                                                    <span><b>@data</b></span>
                                                }
                                                else
                                                {
                                                    <span><b>@data</b>, </span>
                                                }
                                            }
                                        }
                                    </td>
                                </tr>
                            }

                            @if (Model.ProjectList.Count != 0)
                            {
                                var rowCountProject = Model.ProjectList.Count + 1;

                                <tr>
                                    <th rowspan="@rowCountProject">Projects</th>
                                </tr>
                                if (Model.ProjectList != null)
                                {
                                    foreach (var data in Model.ProjectList)
                                    {
                                        <tr>
                                            <td>
                                                <b class="small-heading">@data.Title</b>
                                                <p>@data.Description</p>
                                                <b>Duration : </b>@data.Duration Months
                                            </td>
                                        </tr>
                                        
                                    }
                                }
                            }

                            @if (Model.WorkExList.Count != 0)
                            {
                                var rowCountWorkEx = Model.WorkExList.Count + 1;
                                
                                <tr>
                                    <th rowspan="@rowCountWorkEx">Work Experience</th>
                                </tr>
                                if (Model.WorkExList != null)
                                {
                                    foreach (var data in Model.WorkExList)
                                    {
                                        <tr>
                                            <td>
                                                @if (data.CurrentlyWorking == true)
                                                {
                                                    <b class="small-heading">@data.OrganizationName (Currently Working Here)</b><br />
                                                }
                                                else
                                                {
                                                    <b class="small-heading">@data.OrganizationName</b><br />
                                                }
                                                <b>Role : </b>@data.Role<br />
                                                <b>@data.StartMonth/@data.StartYear - @data.EndMonth/@data.EndYear</b>
                                            </td>
                                        </tr>   
                                    }
                                }
                            }

                            @if (Model.Languages.Count != 0)
                            {
                                <tr>
                                    <th>Languages</th>
                                    <td>
                                        @if (Model.Languages != null)
                                        {
                                            var count = Model.Languages.Count;
                                            var counter = 0;
                                            foreach (var data in Model.Languages)
                                            {
                                                counter++;
                                                if (counter == count - 1)
                                                {
                                                    <span><b>@data</b> and </span>
                                                }
                                                else if (counter == count)
                                                {
                                                    <span><b>@data</b></span>
                                                }
                                                else
                                                {
                                                    <span><b>@data</b>, </span>
                                                }
                                            }
                                        }
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success"><i class="fa fa-download"> Download</i></button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>

        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script>
        $(document).ready(function () {
            if(@Model.WorkExList.Count === 0)
            {
                $('#workExModal').hide();
            }
            console.log(@Model.ProjectList.Count);
            if(@Model.ProjectList.Count === 0)
            {
                $('#projectsModal').hide();
            }
            if(@Model.SkillList.Count === 0)
            {
                $('#skillsModal').hide();
            }
            if(@Model.EducationList.Count === 0)
            {
                $('#educationModal').hide();
            }
            if(@Model.Languages.Count === 0)
            {
                $('#languagesModal').hide();
            }
        });
    </script>
}